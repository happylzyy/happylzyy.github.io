{"meta":{"title":"happylzyy's Blog","subtitle":"","description":"","author":"happylzyy","url":"http://happylzyy.github.io","root":"/"},"pages":[{"title":"Repositories","date":"2024-03-07T11:33:39.898Z","updated":"2021-08-05T16:13:35.000Z","comments":false,"path":"repository/index.html","permalink":"http://happylzyy.github.io/repository/index.html","excerpt":"","text":""},{"title":"About","date":"2024-03-07T11:33:39.898Z","updated":"2022-07-03T09:54:45.000Z","comments":false,"path":"about/index.html","permalink":"http://happylzyy.github.io/about/index.html","excerpt":"","text":"å­¦ä¹ ç»å† æŸå¹´æœˆæ—¥ å°±è¯»äºæŸå¸¦ä¸“æŸè¯´å”±ä¸“ä¸š ç›®å‰ç ”ç©¶åƒ§è¿›è¡Œä¸­... ä¸ªäººç®€ä»‹ å–œæ¬¢æäº‹æƒ…ã€‚ å–œæ¬¢è¯šå®å‹‡æ•¢çš„äººï¼Œè®¨åŒå†…å¿ƒé™©æ¶çš„äººã€‚ å¯„è¯­ è¿™ä¸–ä¸Šä¸€å®šå­˜åœ¨ç€å–„è‰¯ï¼Œå€¼å¾—æˆ‘ä»¬å¥‹æˆ˜åˆ°åº•ã€‚ â€”â€” J. R. R. Tolkien, The Lord of the Ring"},{"title":"Tags","date":"2024-03-07T11:33:39.895Z","updated":"2022-07-03T09:55:16.000Z","comments":false,"path":"tags/index.html","permalink":"http://happylzyy.github.io/tags/index.html","excerpt":"","text":""},{"title":"Categories","date":"2024-03-07T11:33:39.898Z","updated":"2022-07-03T09:55:00.000Z","comments":false,"path":"categories/index.html","permalink":"http://happylzyy.github.io/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"How to enable both secure boot and LUKS with TPM","slug":"enable-secure-boot-and-luks-tpm","date":"2024-08-09T14:16:24.000Z","updated":"2024-08-09T14:23:50.488Z","comments":true,"path":"2024/08/09/enable-secure-boot-and-luks-tpm/","link":"","permalink":"http://happylzyy.github.io/2024/08/09/enable-secure-boot-and-luks-tpm/","excerpt":"","text":"Secure Boot and LUKS TPM Prepare Install all packages we need 1yay -S sbctl tpm2-tss tpm2-tools follow this guideline , generate Machine Own Key and enroll it into the EFI variables. Install bootloader this section changes bootloader from grub to systemd-boot, because grub has not support to LUKSv2. Change esp partition mount point from /boot/efi to /efi permanently. If the esp mount point remains unchanged, grub packages should be removed. 1234umount /boot/efisudo mkdir -p /efisudo sed -i &#x27;s/\\/boot\\/efi/\\/efi/g&#x27; /etc/fstabmount -a Delete old boot entry and install new bootloader 123OLD_MANJARO=&quot;$(efibootmgr | grep &quot;manjaro&quot; | cut -d&#x27; &#x27; -f1 | cut -c 5-8)&quot; # Manjaro is old boot entry nameefibootgmr -b &quot;$&#123;OLD_MANJARO&#125;&quot; -B # delete old boot entrybootctl install &amp;&amp; systemctl enable systemd-boot-update.service # install systemd-boot After installation, it should be a new boot entry \"Linux Boot Manager\" appeared in the UEFI boot menu. Open /boot/efi/loader/loader.conf and add there default @saved. This will make systemd-boot select your previously booted kernel by default. Another useful change is setting timeout to 1 or 2, most likely thatâ€™s long enough period to see bootloaderâ€™s menu and stop countdown if needed. Configure initramfs mkinitcpio.conf Replace HOOKS array in /etc/mkinitcpio.conf and save old ones commented in the end of the file just in case: 12OLD_HOOKS=$(cat /etc/mkinitcpio.conf | grep &quot;^HOOKS=(&quot;)sed -i &#x27;s|&#x27;&quot;$&#123;OLD_HOOKS&#125;&quot;&#x27;|HOOKS=(base systemd autodetect modconf kms keyboard sd-vconsole sd-encrypt block filesystems fsck)|&#x27; /etc/mkinitcpio.conf &amp;&amp; echo &#x27;#previous_&#x27;$OLD_HOOKS |tee -a /etc/mkinitcpio.conf Also for better (de)compression speed/efficiency ratio consider setting COMPRESSION=\"zstd\" in your /etc/mkinitcpio.conf if not set already. Note though that this works only starting from linux 5.10. crypttab.initramfs Do the following to add entry about LUKS partition to crypttab.initramfs 12UUID=$(sudo blkid -s UUID -o value /dev/nvme0n1p5)sudo echo luks-$UUID UUID=$UUID none tpm2-device=auto &gt; /etc/crypttab.initramfs cmdline Create cmdline with the current boot parameters of the system Optionally, /etc/cmdline.d can be used for more flexible configuration. 1cat /proc/cmdline &gt; /etc/kernel/cmdline linux.preset Open preset file for the current kernel in /etc/mkinitcpio.d, such as linux66.preset. Make changes following line : uncomment default_uki fallback_uki default_options comment default_image fallback_image make sure the appropriate mount point of the esp in the uki path build UKI 1sudo mkinitcpio -P After building, there should be several UKI images in /boot/efi/EFI/Linux. Optionally, we can remove old images unused under /boot. 1sudo rm /boot/initramfs* if warning about consolefont appears during build process, create vconsole.conf and build again. 1echo &quot;KEYMAP=us\\nFONT=tcvn8x16&quot; &gt; /etc/vconsole.conf Secure Boot sbctl is a tool that generates signed and thus trusted images used to boot system. Create a new script sbsign-all. 1vim ./sbsign-all Write following code in this script and save 123456789101112#!/usr/bin/env bashefidir=&quot;/boot/efi&quot;# UKI signfor file in $&#123;efidir&#125;/EFI/Linux/*.efi; do /usr/bin/sbctl sign -s $file; done# system-boot sign/usr/bin/sbctl sign -s -o /usr/lib/systemd/boot/efi/systemd-bootx64.efi.signed /usr/lib/systemd/boot/efi/systemd-bootx64.efi# kernel signfor file in /boot/vmlinuz*; do /usr/bin/sbctl sign -s $file; done change permission for excutation 1sudo chmod a+x ./sbsign-all then run the script. 1sudo ./sbsign-all Benefit from mkinitcpio hook and pacman hook, the sign process will run automatically when system upgrade or modified. After all steps above, reboot and enter UEFI setup menu, set Secure Boot ON, exit saving setting, check if the system can boot normally. Unlock LUKS via TPM The manjaro installation use LUKSv1 for the default crypt solution, but our plan only support LUKSv2. So we need convert LUKS before configuring TPM. Insert the manjaro installation U-disk into the computer, enter live CD environment. if it is prohibited by secure policy, disable secure boot mode temporarily. Open a terminal, run following command. 1sudo cryptsetup convert --type luks2 /dev/nvme0n1p5 reboot and enable secure boot mode again. Before sealing LUKS key into TPM, check command bootctl, following condition should be satisfied: system booted by systemd-boot bootloader system booted in secure boot mode If the conditions are satisfied, check the cryptsetup status: 1sudo cryptsetup luksDump /dev/nvme0n1p5 Normally it should have 1 or 2 keyslots already occupied, the first one is passphrase we set, the other is probably /crypto_keyfile.bin, and no tokens in place (yet). we suggest remove slot 1 if itâ€™s occupied by crypto_keyfile at the moment (since itâ€™s not safe to use crypto_keyfile in configuration weâ€™re building). 12sudo cryptsetup luksKillSlot /dev/nvme0n1p5 1sudo rm /crypto_keyfile.bin Then seal the LUKS key into TPM with PCR 7 1sudo systemd-cryptenroll /dev/nvme0n1p5 --tpm2-device=auto --tpm2-pcrs=7 References https://forum.manjaro.org/t/howto-using-secure-boot-and-tpm2-to-unlock-luks-partition-on-boot/101626 https://wiki.archlinux.org/title/Unified_Extensible_Firmware_Interface/Secure_Boot# https://wiki.archlinux.org/title/Unified_kernel_image https://wiki.archlinux.org/title/Trusted_Platform_Module https://wiki.archlinux.org/title/Systemd-cryptenroll#Trusted_Platform_Module https://wiki.archlinux.org/title/Dm-crypt/System_configuration#Using_systemd-cryptsetup-generator https://wiki.archlinux.org/title/Dm-crypt/System_configuration#Examples https://wiki.archlinux.org/title/Dm-crypt/System_configuration#Trusted_Platform_Module_and_FIDO2_keys","categories":[],"tags":[{"name":"manjaro","slug":"manjaro","permalink":"http://happylzyy.github.io/tags/manjaro/"},{"name":"linux","slug":"linux","permalink":"http://happylzyy.github.io/tags/linux/"},{"name":"secureboot","slug":"secureboot","permalink":"http://happylzyy.github.io/tags/secureboot/"},{"name":"luks","slug":"luks","permalink":"http://happylzyy.github.io/tags/luks/"},{"name":"tpm","slug":"tpm","permalink":"http://happylzyy.github.io/tags/tpm/"}]},{"title":"Manjaro Linux Reinstall Record","slug":"manjaro-linux-install-record","date":"2024-03-07T13:37:48.000Z","updated":"2024-08-09T14:23:02.944Z","comments":true,"path":"2024/03/07/manjaro-linux-install-record/","link":"","permalink":"http://happylzyy.github.io/2024/03/07/manjaro-linux-install-record/","excerpt":"","text":"Manjaro Linux Setup Install partition 1234567NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINTSnvme0n1 259:0 0 931.5G 0 diskâ”œâ”€nvme0n1p1 259:1 0 400M 0 part /boot/efi...â”œâ”€nvme0n1p5 259:5 0 258G 0 partâ”‚ â””â”€luks-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx 254:0 0 258G 0 crypt /... esp partition nvme0n1p1 mount on \\boot\\efi, while the root system installed on crypted partition nvme0n1p5 with LUKSv1. Replace block names according to actual situation of your computer. System modification Before start, make an upgrade for the whole system. 1sudo pacman -Syu Repository Change server location: China Add archlinuxcn Repository at the end of file. 1234sudo echo &gt;&gt; /etc/pacman.conf &quot;[archlinuxcn]Server = https://mirrors.ustc.edu.cn/archlinuxcn/$arch&quot; Enable flatpak and AUR in \"Add / Remove Software\" setting. Install yay tool for more comfortable package management experience. 1sudo pacman -S yay Shell Install oh-my-zsh-git from archlinuxcn repository with the latest code. 1yay -S archlinuxcn/oh-my-zsh-git After installing the package, copy .zshrc from system to home directory. 1cp /usr/share/oh-my-zsh/zshrc ~/.zshrc Add the following code to the end of .zshrc for original manjaro shell experience. 12345678910# Use powerlineUSE_POWERLINE=&quot;true&quot;# Source manjaro-zsh-configurationif [[ -e /usr/share/zsh/manjaro-zsh-config ]]; thensource /usr/share/zsh/manjaro-zsh-configfi# Use manjaro zsh promptif [[ -e /usr/share/zsh/manjaro-zsh-prompt ]]; thensource /usr/share/zsh/manjaro-zsh-promptfi At last, make some small modification, install autojump plugin. 1yay -S autojump modify the .zshrc file. 1plugins=(git autojump) then, change shell to zsh. 1chsh -s /bin/zsh sudo without password add this line at the end of file /etc/sudoers.d/10-installer 1sudo echo %wheel ALL=(ALL:ALL) NOPASSWD: ALL &gt;&gt; /etc/sudoers.d/10-installer GPU Switch Use envycontrol to switch intel, nvidia, and hybrid mode. 1yay -S envycontrol In addition, a kde plasma5 widget can be convenient. 1yay -S plasma5-applets-optimus-gpu-switcher Fonts Install several fonts both in Latin and Chinese. 1yay -S wqy-microhei-lite wqy-bitmapfont wqy-microhei wqy-zenhei ttf-roboto adobe-source-han-sans-cn-fonts adobe-source-han-serif-cn-fonts Install ttf-apple-emoji to replace original noto-fonts-emoji 1yay -S ttf-apple-emoji Make system custom font configuration to enable apple color emoji and change preferred Chinese fonts. 12sudo touch /etc/fonts/local.confsudo vim /etc/fonts/local.conf Paste following code into local.conf. 12345678910111213141516171819202122232425262728293031323334353637&lt;?xml version=&quot;1.0&quot;?&gt;&lt;!DOCTYPE fontconfig SYSTEM &quot;fonts.dtd&quot;&gt;&lt;fontconfig&gt; &lt;alias&gt; &lt;family&gt;sans-serif&lt;/family&gt; &lt;prefer&gt; &lt;family&gt;Noto Sans&lt;/family&gt; &lt;family&gt;Apple Color Emoji&lt;/family&gt; &lt;family&gt;Noto Emoji&lt;/family&gt; &lt;family&gt;DejaVu Sans&lt;/family&gt; &lt;family&gt;Source Han Sans CN&lt;/family&gt; &lt;/prefer&gt; &lt;/alias&gt; &lt;alias&gt; &lt;family&gt;serif&lt;/family&gt; &lt;prefer&gt; &lt;family&gt;Noto Serif&lt;/family&gt; &lt;family&gt;Apple Color Emoji&lt;/family&gt; &lt;family&gt;Noto Emoji&lt;/family&gt; &lt;family&gt;DejaVu Serif&lt;/family&gt; &lt;family&gt;Source Han Serif CN&lt;/family&gt; &lt;/prefer&gt; &lt;/alias&gt; &lt;alias&gt; &lt;family&gt;monospace&lt;/family&gt; &lt;prefer&gt; &lt;family&gt;Noto Mono&lt;/family&gt; &lt;family&gt;Apple Color Emoji&lt;/family&gt; &lt;family&gt;Noto Emoji&lt;/family&gt; &lt;family&gt;DejaVu Sans Mono&lt;/family&gt; &lt;family&gt;WenQuanYi Micro Hei Mono&lt;/family&gt; &lt;/prefer&gt; &lt;/alias&gt;&lt;/fontconfig&gt; Command Install some very useful and common tools. 1yay -S zip net-tools base-devel nmap vulscan python-pypandoc 1yay -S cowsay xcowsay sl asciiquarium fortune-mod cmatrix oneko toilet lolcat Appearance Install latte dock 1yay -S latte-dock Change the desktop layout: move panel from bottom to top; add widgets into panel: Application Launcher, Global menu, Panel Spacer, Network speed, CatWalk, System tray, Pager, Digital clock, Peek at Desktop. add latte dock at bottom of desktop with widgets: Application Dashboard, Latte Tasks, Trashcan, Analog clock. add a weather widget right side the desktop. For widgets configuration, CatWalk idle threshold is 30%, weather location is Tianjin, China. For latte dock, Items absolute size is 56px., zoom on hover is 10%, background size is 14%, and Opacity is 52%. swapfile The system has no swap partition after default installation process, for the full suspend and hibernation function experience, we setup swap manually. Create a swap file matched the physical memory and set proper permissions. 12sudo fallocate -l 8G /.swapfile # create a hide swapfile on root /sudo chmod 600 /.swapfile Enable and open swap 12sudo mkswap /.swapfilesudo swapon /.swapfile Insert swap info into fstab 1sudo echo &quot;/.swapfile none swap defaults 0 0&quot; &gt;&gt; /etc/fstab Reboot and check if the swap on 123swaponNAME TYPE SIZE USED PRIO/.swapfile file 8G 0B -2 Samba In Dolphin, the property share tab is unavailable because of samba service broken. Now we fix it. 123456789101112131415161718yay -S sambasudo touch /etc/samba/smb.confsudo mkdir -p /var/lib/samba/usersharessudo groupadd sambashares -U [username]sudo chown [username]:sambashares /var/lib/samba/usersharessudo chmod 1770 /var/lib/samba/usersharessudo systemctl enable smb.service# Optionally, for accessible via NetBIOS host namesudo systemctl enable nmb.service# Optionally, for discoverable by most non-Windows file managerssudo systemctl enable avahi-daemon.service# Optionally, for discoverable by Windows, wsdd service required yay -S wsddsudo systemctl enable wsdd.service Add following text into smb.conf (in order to prevent bugs, add a blank line at the end of file.) 1234567[global] usershare path = /var/lib/samba/usershares usershare max shares = 100 usershare allow guests = yes usershare owner only = yes then reboot. Attention: it seems like there are many bugs in property share tab. Firewall A Firewall and Firewall GUI manager is optional for network using. 123yay -S firewalldsudo systemctl enable firewalld.servicesudo systemctl start firewalld.service SSD trim Trim is referred to discard unused blocks on the SSD. Trim on encrypted device has specific security risks, but for most users, the benefit of TRIM outweigh those security concerns. 12sudo cryptsetup --allow-discards --persistent refresh luks-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxxsudo fstrim -a -v Java environment In order to run jar application such as minecraft, Java environment is required. we can install OpenJDK environment with JavaFX support. 1yay -S aur/java-openjfx # jre and jdk will be installed as dependencies automatically Install and config application git add lfs support 1yay -S git-lfs config username and e-mail. 12git config --global user.name &quot;My Name&quot;git config --global user.email &quot;myemail@example.com&quot; Internet Technology there are many useful packages in repository. 1yay -S archlinuxcn/*****-verge-rev-bin watt-toolkit-bin fcitx5 and rime Install fcitx5 bundle including 4 packages: fcitx5 2) fcitx5-configtool 3) fcitx5-gtk 4) fcitx5-qt and other extra packages 1yay -S fcitx5-im fcitx5-lua kcm-fcitx5 fcitx5-rime fcitx5-chinese-addons libime manjaro-asian-input-support-fcitx5 rime-symbols then reboot to apply modify. clone clover_flypinyin to local 1git clone https://github.com/happylzyy/rime-cloverpinyin.git follow the README.md to build the package. extract package to /usr/share/rime-data and replace exsiting file. create a config file in ~/.local/share/fcitx5/rime 1touch default.custom.yaml and write 12345patch: &quot;menu/page_size&quot;: 5 schema_list: - schema: clover_flypy - schema: clover restart the rime engine. apparmor install apparmor utils and enable the service. 12yay -S apparmorsystemctl enable apparmor.service Add kernel cmdline as follows. This section is not suitable for grub but for UKI. 12mkdir /etc/cmdline.dtouch /etc/cmdline.d/security.conf 12# enable apparmorlsm=landlock,lockdown,yama,integrity,apparmor,bpf audit=1 audit_backlog_limit=256 vim install gvim via yay tool. 1yay -S gvim clone the vim config to .vim folder. 123mkdir -p ~/.vim &amp;&amp; cd ~/.vimgit clone https://github.com/happylzyy/vim-init.gitcd vim-init &amp;&amp; git checkout linux create a new file .vimrc' in home directory and add following code 1echo source ~/.vim/vim-init/init.vim &gt; .vimrc open vim, type:PluginInstall` to fix missing plugins via internet. typora the last free version of typora is 0.11.18(beta), we can build it by using AUR PKGBUILD. 1yay -S aur/typora-free albert 1yay -S archlinuxcn/albert Open System Setting -&gt; Startup and Shutdown-&gt;Autostart, add albert in autorun list. Attention: albert has no wayland support yet. WPS Install wps and all dependencies including chinese language support, font packages, and several fix patch, etc. 1yay -S wps-office wps-office-all-dicts-win-languages wps-office-mui-zh-cn wps-office-mime-cn wps-office-fonts wps-office-bwrap freetype2-wps ttf-wps-fonts ttf-ms-fonts install bug fix libtiff5 1yay -S libtiff5 GIMP 1yay -S gimp Make GIMP Look Like Photoshop, follow the PhotoGIMP project. Node.js 1yay -S nodejs npm configure local repository 1npm config set registry https://registry.npmmirror.com/ OneDrive As some files synced on onedrive, we install onedriver and create some links 123456yay -S onedrive-abraunegg onedrivegui# Seting onedrive at ~/OneDrive in the onedrivegui appln -s ~/OneDrive/Sync/Minecraft/server ./serverln -s ~/OneDrive/Sync/Calibre ./Calibreln -s ~/OneDrive/Sync/Zotero/storage ./Zotero/storage Other app without configuration 1yay -S steam stellarium visual-studio-code-bin zenmap wechat-beta-bwrap lx-music-desktop-bin calibre zotero kleopatra","categories":[],"tags":[{"name":"manjaro","slug":"manjaro","permalink":"http://happylzyy.github.io/tags/manjaro/"},{"name":"linux","slug":"linux","permalink":"http://happylzyy.github.io/tags/linux/"}]},{"title":"åœ¨Manjaro Linuxä¸Šå¯ç”¨SecureBoot","slug":"how-to-enable-secureboot-on-manjaro","date":"2023-10-01T14:59:25.000Z","updated":"2024-04-06T14:24:02.008Z","comments":true,"path":"2023/10/01/how-to-enable-secureboot-on-manjaro/","link":"","permalink":"http://happylzyy.github.io/2023/10/01/how-to-enable-secureboot-on-manjaro/","excerpt":"","text":"ä»€ä¹ˆæ˜¯å®‰å…¨å¼•å¯¼ï¼ˆSecureBootï¼‰ï¼Ÿ Secure Boot æ˜¯ä¸€é¡¹ç”¨äºæé«˜è®¡ç®—æœºå¯åŠ¨å®‰å…¨æ€§çš„æŠ€æœ¯ã€‚å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯åœ¨è®¡ç®—æœºå¯åŠ¨è¿‡ç¨‹ä¸­éªŒè¯å¼•å¯¼åŠ è½½ç¨‹åºå’Œæ“ä½œç³»ç»Ÿå†…æ ¸çš„å®‰å…¨æ€§å’Œå®Œæ•´æ€§ã€‚ Secure Boot çš„å·¥ä½œåŸç†æ˜¯: åœ¨ UEFI å›ºä»¶ä¸­å†…ç½®ä¸€ä¸ªå¯ä¿¡çš„å…¬é’¥ï¼Œç”¨äºéªŒè¯å¼•å¯¼åŠ è½½ç¨‹åºå’Œæ“ä½œç³»ç»Ÿå†…æ ¸çš„æ•°å­—ç­¾åã€‚è¿™äº›ç»„ä»¶åœ¨å‘å¸ƒå‰éƒ½è¦ä½¿ç”¨è¯¥å…¬é’¥å¯¹åº”çš„ç§é’¥è¿›è¡Œç­¾åã€‚ å½“è®¡ç®—æœºå¯åŠ¨æ—¶ï¼Œå›ºä»¶ä¼šæ£€æŸ¥å¼•å¯¼åŠ è½½ç¨‹åºçš„ç­¾åã€‚å¦‚æœç­¾åæœ‰æ•ˆï¼Œåˆ™åŠ è½½å¼•å¯¼åŠ è½½ç¨‹åºå¹¶æ‰§è¡Œã€‚å¦‚æœç­¾åæ— æ•ˆï¼Œåˆ™åœæ­¢å¯åŠ¨è¿‡ç¨‹ã€‚ å¼•å¯¼åŠ è½½ç¨‹åºå†æ£€æŸ¥æ“ä½œç³»ç»Ÿå†…æ ¸çš„ç­¾åã€‚å¦‚æœç­¾åæœ‰æ•ˆï¼Œåˆ™åŠ è½½å†…æ ¸å¹¶å¯åŠ¨æ“ä½œç³»ç»Ÿã€‚ æ•´ä¸ªå¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œä»»ä½•ä¸€ä¸ªç»„ä»¶çš„ç­¾åéªŒè¯å¤±è´¥ï¼Œéƒ½ä¼šåœæ­¢å¯åŠ¨ï¼Œä»è€Œé˜²æ­¢æ½œåœ¨çš„æ¶æ„è½¯ä»¶å…¥ä¾µã€‚ å¯ç”¨ Secure Boot å¯ä»¥é˜²æ­¢ rootkit å’Œ bootkit ç­‰ç—…æ¯’çš„æ„ŸæŸ“ã€‚å®ƒæ˜¯ UEFI å›ºä»¶çš„ä¸€ä¸ªé‡è¦å®‰å…¨åŠŸèƒ½ï¼Œç°ä»£ä¸ªäººè®¡ç®—æœºå’ŒæœåŠ¡å™¨å¹¿æ³›é‡‡ç”¨ã€‚ä½†ä¹Ÿå­˜åœ¨å¯èƒ½é™åˆ¶æ“ä½œç³»ç»Ÿé€‰æ‹©ã€å¢åŠ è½¯ä»¶å…¼å®¹æ€§é—®é¢˜ç­‰ç¼ºç‚¹ã€‚ å¯ç”¨SecureBootè¿‡ç¨‹ Manjaro Linux ç³»ç»Ÿå¯ç”¨ Secure Boot çš„è¿‡ç¨‹åŒ…æ‹¬ï¼š ç³»ç»Ÿå¼•å¯¼ç¨‹åºéœ€è¦è·å¾— Microsoft çš„ç­¾åå¯†é’¥æ‰èƒ½è®©æ“ä½œç³»ç»Ÿå†…æ ¸é€šè¿‡ Secure Boot éªŒè¯,ä½†è¿™æ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸ºå¾®è½¯ä¸ä¼šè¿™ä¹ˆåšã€‚å› æ­¤æ›¿ä»£æ–¹æ¡ˆæ˜¯è‡ªè¡Œç”ŸæˆMOKå¯†é’¥ï¼ˆMachine Owner Keyï¼‰å¹¶æ›¿æ¢ UEFI å›ºä»¶çš„é»˜è®¤å¯†é’¥ï¼› æŒ‰ç…§GRUBçš„å®˜æ–¹æ–‡æ¡£é‡æ–°ç”Ÿæˆå¹¶å®‰è£…GRUBï¼Œè¿™ä¸€æ­¥å‘æ¯”è¾ƒå¤šï¼› ä½¿ç”¨MOKå¯†é’¥å¯¹å¼•å¯¼ç¨‹åºè¿›è¡Œç­¾åã€‚ MOKå¯†é’¥ç”Ÿæˆå’Œå¯¼å…¥ åœ¨å¼€å§‹ä¹‹å‰ï¼Œå…ˆé‡å¯ç³»ç»Ÿè¿›å…¥BIOSè®¾ç½®ç•Œé¢ï¼Œè®¾ç½®SecureBootè¿›å…¥Setup Modeï¼ˆä¸åŒçš„æœºå™¨å¯èƒ½æ“ä½œä¸ä¸€æ ·ï¼‰ã€‚ è®¾ç½®å®Œæˆåé‡å¯è¿›å…¥ç³»ç»Ÿï¼Œå®‰è£…ä»¥ä¸‹è½¯ä»¶ï¼š sbctlï¼šSecure Boot key managerï¼Œè¿™ä¸ªå·¥å…·ä½¿å¾—å¯†é’¥çš„ç”Ÿæˆå’Œå†™å…¥å˜å¾—éå¸¸ç®€å•ï¼Œå®ƒè¿˜æ‹¥æœ‰å¼•å¯¼ç¨‹åºç­¾åã€pacman hookç­‰åŠŸèƒ½ã€‚ 1yay -S sbctl æŸ¥çœ‹SecureBootçŠ¶æ€ï¼š 1sudo sbctl status åº”è¯¥çœ‹åˆ° sbctl å·¥å…·æœªå®‰è£…å¹¶ä¸”SecureBootå·²ç¦ç”¨ã€‚ ç”ŸæˆMOKå¯†é’¥ï¼š 1sudo sbctl create-keys è¿™å°†åœ¨é»˜è®¤ä½ç½®ç”ŸæˆMOKå¯†é’¥ã€‚ å°†MOKå¯†é’¥è¿å¸¦Microsoftå¯†é’¥ä¸€èµ·å¯¼å…¥UEFIå›ºä»¶ä¸­ï¼š 1sudo sbctl enroll-keys -m æ³¨æ„ï¼šå¦‚æœä¸é™„å¸¦â€œ-mâ€é€‰é¡¹ï¼Œå°†ä¼šå¯¼è‡´Mincrosoftå¯†é’¥ä¸¢å¤±ï¼Œä½¿Windowsæ— æ³•å¯åŠ¨ï¼Œè€Œä¸”æŸäº›å›ºä»¶ä¼šä½¿ç”¨ Microsoft å¯†é’¥è¿›è¡Œç­¾åå’ŒéªŒè¯ï¼Œä¸éªŒè¯è®¾å¤‡å¯èƒ½ä¼šä½¿å®ƒä»¬å˜ç –ã€‚ å†æ¬¡æ£€æŸ¥SecureBootçŠ¶æ€ï¼Œæ­¤æ—¶sbctlä¼šæ˜¾ç¤ºå·²å®‰è£…ã€‚ 1sudo sbctl status é‡æ–°æ„å»ºGRUB è¦ä½¿GRUBèƒ½åœ¨SecureBootæ¨¡å¼ä¸‹å¯åŠ¨ï¼ŒGRUBå¿…é¡»é›†æˆè¿è¡Œè¿‡ç¨‹ä¸­æ‰€éœ€çš„æ‰€æœ‰æ¨¡å—ï¼Œå¯ä»¥å‚è€ƒubuntuçš„grubç”Ÿæˆè„šæœ¬æ¥é€‰æ‹©æ‰€éœ€è¦çš„æ¨¡å—ã€‚ç„¶åï¼Œå°†è¿™äº›æ¨¡å—è®°å½•æˆç¯å¢ƒå˜é‡ä½¿ç”¨ã€‚ æ–°å»º\\etc\\grub_modulesæ–‡ä»¶ï¼š 1sudo touch /etc/grub_modules æ‰“å¼€æ–‡ä»¶ï¼ŒåŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394CD_MODULES=&quot; all_video boot btrfs cat chain configfile echo efifwsetup efinet ext2 fat font gettext gfxmenu gfxterm gfxterm_background gzio halt help hfsplus iso9660 jpeg keystatus loadenv loopback linux ls lsefi lsefimmap lsefisystab lssal memdisk minicmd normal ntfs part_apple part_msdos part_gpt password_pbkdf2 png probe reboot regexp search search_fs_uuid search_fs_file search_label sleep smbios squash4 test true video xfs zfs zfscrypt zfsinfo cpuid play tpm &quot;GRUB_MODULES=&quot;$CD_MODULES cryptodisk gcry_arcfour gcry_blowfish gcry_camellia gcry_cast5 gcry_crc gcry_des gcry_dsa gcry_idea gcry_md4 gcry_md5 gcry_rfc2268 gcry_rijndael gcry_rmd160 gcry_rsa gcry_seed gcry_serpent gcry_sha1 gcry_sha256 gcry_sha512 gcry_tiger gcry_twofish gcry_whirlpool luks lvm mdraid09 mdraid1x raid5rec raid6rec &quot; æˆ–è€…ï¼Œé€šè¿‡å·²æœ‰çš„grub.cfgæ–‡ä»¶å¯»æ‰¾æ‰€éœ€çš„æ¨¡å—ï¼š 1sudo cat /boot/grub/grub.cfg | awk &#x27;/insmod/ &#123; print $2 &#125;&#x27; | sort | uniq ä¿å­˜æ–‡ä»¶å¹¶sourceï¼š 1source /etc/grub_modules é‡æ–°æ„å»ºå®‰è£…GRUBåˆ°ESPåˆ†åŒºï¼š 1sudo grub-install --target=x86_64-efi --efi-directory=/boot/efi --modules=&quot;$&#123;GRUB_MODULES&#125;&quot; --sbat /usr/share/grub/sbat.csv --disable-shim-lock targeté€‰é¡¹æŒ‡æ˜ç³»ç»Ÿæ¶æ„ï¼Œefi-directoryæŒ‡æ˜ESPåˆ†åŒºæŒ‚è½½çš„ä½ç½®ï¼Œsbatæ˜¯SecureBootè¿‡ç¨‹ä¸­GRUBéœ€è¦çš„å°èŠ‚ï¼Œdisable-shim-locké€‰é¡¹è§£å†³äº†shim_lock protocol not foundé”™è¯¯ã€‚ é‡æ–°ç”Ÿæˆgrub.cfg: 1sudo grub-mkconfig -o /boot/grub/grub.cfg å¯¹å¼•å¯¼ç¨‹åºè¿›è¡Œç­¾å 1sudo sbctl sign -s /boot/efi/EFI/Manjaro/grubx64.efi é‡æ–°æ£€æŸ¥efiæ–‡ä»¶ç­¾åæƒ…å†µï¼š 1sudo sbctl verify é™¤windowsç›¸å…³çš„å¼•å¯¼æ–‡ä»¶å¤–ï¼Œå…¶ä»–efiéƒ½åº”è¯¥è¿›è¡Œç­¾åï¼Œä¾‹å¦‚é»‘è‹¹æœå¼•å¯¼OpenCoreæ–‡ä»¶çš„ç­¾åï¼š 12345678sudo -isbctl sign -s /boot/efi/EFI/OC/OpenCore.efi #å‡è®¾espæŒ‚è½½ç‚¹ä¸º/boot/efi/for file in /boot/efi/EFI/OC/Drivers/*; dosbctl sign -s $file;donefor file in /boot/efi/EFI/OC/Tools/*; dosbctl sign -s $file;done æµ‹è¯• ç­¾åå®Œæˆåï¼Œè¿›å…¥BIOSå°†SecureBootè®¾ä¸ºå¯ç”¨çŠ¶æ€ã€‚ é‡å¯è¿›å…¥ç³»ç»Ÿï¼Œæ£€æŸ¥SecureBootçŠ¶æ€ï¼š 1sudo sbctl status æ­£å¸¸åº”è¯¥å¦‚ä¸‹æ‰€ç¤ºï¼š 12345Installed: âœ“ sbctl is installedOwner GUID: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxxSetup Mode: âœ“ DisabledSecure Boot: âœ“ EnabledVendor Keys: microsoft ç„¶åï¼Œæµ‹è¯•å…¶ä»–ç³»ç»Ÿæ˜¯å¦èƒ½å¤Ÿå¯åŠ¨æˆåŠŸã€‚ è‡³æ­¤ï¼ŒSecureBootå¯ç”¨å®Œæˆã€‚","categories":[],"tags":[{"name":"manjaro","slug":"manjaro","permalink":"http://happylzyy.github.io/tags/manjaro/"},{"name":"secureboot","slug":"secureboot","permalink":"http://happylzyy.github.io/tags/secureboot/"},{"name":"bios","slug":"bios","permalink":"http://happylzyy.github.io/tags/bios/"}]},{"title":"ç»™hexoç½‘ç«™å¢åŠ ä¸€äº›æœ‰è¶£çš„ç‰¹æ•ˆ","slug":"add-something-interesting","date":"2022-07-28T15:36:46.000Z","updated":"2022-07-28T16:03:58.000Z","comments":true,"path":"2022/07/28/add-something-interesting/","link":"","permalink":"http://happylzyy.github.io/2022/07/28/add-something-interesting/","excerpt":"","text":"ç»™hexoç½‘é¡µæ·»åŠ ä¸€äº›æœ‰è¶£çš„jsæ¥å¢åŠ ä¹è¶£ã€‚ç›®å‰å·²ç»æ·»åŠ äº†ä¸¤ä¸ªï¼šé¼ æ ‡åŠ¨æ€çº¿æ¡å¸å¼•è·Ÿéšç‰¹æ•ˆã€é¼ æ ‡æ–‡å­—å¼¹å‡ºç‰¹æ•ˆã€‚ é¼ æ ‡åŠ¨æ€çº¿æ¡å¸å¼•è·Ÿéš è™½ç„¶æ²¡ä»€ä¹ˆç”¨ç”šè‡³æœ‰äº›é®æŒ¡æ–‡å­—é˜…è¯»ï¼Œä½†æ˜¯ç‰¹æ•ˆå¥½çœ‹ç‚«é…·å°±å®Œäº‹äº†ã€‚ æ‰“å¼€pureä¸»é¢˜æ–‡ä»¶themes/pure/layout/layout.ejsï¼Œåœ¨&lt;/body&gt;æ ‡ç­¾å‰åŠ ä¸€è¡Œ 1&lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/canvas-nest.js/2.0.4/canvas-nest.js&quot;&gt;&lt;/script&gt; ä¿å­˜ä¿®æ”¹ï¼Œé‡æ–°ç”ŸæˆblogæŸ¥çœ‹æ•ˆæœã€‚ é¼ æ ‡æ–‡å­—å¼¹å‡ºç‰¹æ•ˆ ä½œä¸ºä¸€åæœ‰ç†æƒ³æœ‰å¿—å‘çš„çˆ±å›½é’å¹´ï¼Œç¤¾ä¼šä¸»ä¹‰æ ¸å¿ƒä»·å€¼è§‚è¦ç‰¢è®°å¿ƒä¸­ã€‚ ç›®å‰æ²¡æœ‰å‘ç°è¯¥ç‰¹æ•ˆjsçš„æ‰˜ç®¡CDNï¼Œåªèƒ½å…¨ä»£ç æ·»åŠ äº†ã€‚åŒæ ·æ˜¯pureä¸»é¢˜æ–‡ä»¶themes/pure/layout/layout.ejsï¼Œåœ¨&lt;/body&gt;æ ‡ç­¾å‰åŠ å…¥ä»¥ä¸‹ä»£ç ï¼š 1234567891011121314151617181920212223242526272829&lt;script type=&quot;text/javascript&quot;&gt;var a_idx = 0;jQuery(document).ready(function($) &#123; $(&quot;body&quot;).click(function(e) &#123; var a = new Array(&quot;å¯Œå¼º&quot;, &quot;æ°‘ä¸»&quot;, &quot;æ–‡æ˜&quot;, &quot;å’Œè°&quot;, &quot;è‡ªç”±&quot;, &quot;å¹³ç­‰&quot;, &quot;å…¬æ­£&quot; ,&quot;æ³•æ²»&quot;, &quot;çˆ±å›½&quot;, &quot;æ•¬ä¸š&quot;, &quot;è¯šä¿¡&quot;, &quot;å‹å–„&quot;); var $i = $(&quot;&lt;span/&gt;&quot;).text(a[a_idx]); a_idx = (a_idx + 1) % a.length; var x = e.pageX, y = e.pageY; $i.css(&#123; &quot;z-index&quot;: 999999999999999999999999999999999999999999999999999999999999999999999, &quot;top&quot;: y - 20, &quot;left&quot;: x, &quot;position&quot;: &quot;absolute&quot;, &quot;font-weight&quot;: &quot;bold&quot;, &quot;color&quot;: &quot;#ff6651&quot; &#125;); $(&quot;body&quot;).append($i); $i.animate(&#123; &quot;top&quot;: y - 180, &quot;opacity&quot;: 0 &#125;, 1500, function() &#123; $i.remove(); &#125;); &#125;);&#125;);&lt;/script&gt; ç‰¹åˆ«åœ°æ˜¯ï¼Œä»£ç å·²ç»å±•ç¤ºäº†å¦‚ä½•è‡ªå®šä¹‰ï¼Œæœ‰éœ€è¦å¯ä»¥è‡ªå·±å®šåˆ¶å¼¹å‡ºæ–‡å­—ã€‚ ä¿å­˜æ–‡ä»¶ï¼Œé‡æ–°ç”Ÿæˆç½‘é¡µæŸ¥çœ‹æ•ˆæœã€‚ ç½‘é¡µå® ç‰© TODO æœªå®Œå¾…ç»­......","categories":[],"tags":[{"name":"javascript","slug":"javascript","permalink":"http://happylzyy.github.io/tags/javascript/"},{"name":"hexo","slug":"hexo","permalink":"http://happylzyy.github.io/tags/hexo/"}]},{"title":"ArchLinuxä¸­HMCLå¯åŠ¨å™¨æç¤ºç¼ºå°‘JavaFXçš„è§£å†³æ–¹æ³•","slug":"HMCL-missing-openjfx","date":"2022-07-12T06:36:18.000Z","updated":"2023-09-17T11:52:24.000Z","comments":true,"path":"2022/07/12/HMCL-missing-openjfx/","link":"","permalink":"http://happylzyy.github.io/2022/07/12/HMCL-missing-openjfx/","excerpt":"","text":"é—®é¢˜æè¿° åœ¨Arch Linuxç³»ç»Ÿä¸­å·²ç»å®‰è£…äº†ä»¥ä¸‹é»˜è®¤ç‰ˆæœ¬çš„è½¯ä»¶åŒ…ï¼š java-openjfx jdk-openjdk jre-openjdk jre-openjdk-headless è¿è¡ŒHMCLçš„æ—¶å€™ä¼šæç¤ºæ‰¾ä¸åˆ°JavaFXï¼š 1234[org.jackhuang.hmcl.util.SelfDependencyPatcher.patch/INFO] Missing JavaFX dependencies, attempting to patch in missing classes[org.jackhuang.hmcl.util.SelfDependencyPatcher.loadFromCache/INFO] - Loading dependencies...[org.jackhuang.hmcl.util.SelfDependencyPatcher.patch/INFO] - Done! HMCLæ˜¯ä¸€ä¸ªå¾ˆå¥½ç”¨çš„minecraftå¯åŠ¨å™¨ï¼Œå®ƒèƒ½å¤Ÿè‡ªåŠ¨åˆ°ç½‘ç»œä¸Šä¸‹è½½æ‰€éœ€çš„ä¾èµ–ï¼Œä½†æ˜¯ç³»ç»Ÿæœ¬èº«å·²ç»å®‰è£…äº†æ‰€éœ€ä¾èµ–ï¼Œä¸ºä»€ä¹ˆä¸ç”¨å‘¢ï¼Ÿ æ®äº†è§£ï¼ŒJavaFXä¸å†æ˜¯OpenJDKçš„ä¸€éƒ¨åˆ†äº†ï¼Œå› æ­¤ç”¨é»˜è®¤çš„OpenJDKè¿è¡Œjarä¼šå‡ºç°æ‰¾ä¸åˆ°JavaFXæ¨¡å—çš„é—®é¢˜ã€‚ è§£å†³çš„æ–¹æ³•æ˜¯æ‰‹åŠ¨æ·»åŠ JavaFXæ¨¡å—ã€‚ç”±äºæŸç§æœªçŸ¥çš„åŸå› ï¼ŒArch Linuxä¸­ï¼Œjava-openjfxåŒ…ä¼šå°†JavaFXåº“å®‰è£…åˆ°OpenJDKçš„libç›®å½•ä¸­ï¼Œå¯¼è‡´ä»¥ä¸‹æ·»åŠ æ–¹å¼å‡ºç°é”™è¯¯ 123$ java --module-path /usr/lib/jvm/java-20-openjdk/lib --add-modules javafx.base,javafx.controls,javafx.fxml,javafx.graphics,javafx.media,javafx.swing,javafx.web -jar HMCL-3.5.5.jarError occurred during initialization of boot layerjava.lang.LayerInstantiationException: Package jdk.internal.jrtfs in both module java.base and module jrt.fs è¿™æ˜¯å› ä¸ºï¼Œåœ¨é¡¶çº§ç›®å½•ä¸­ä¸åŒ…å«module-info.classçš„jaræ–‡ä»¶è¢«è§†ä¸ºè‡ªåŠ¨æ¨¡å—è‡ªåŠ¨åŠ è½½ï¼Œjrt.fsåŒ…å«ç¼–è¯‘ä¸ºJDK 8çš„â€œjrtâ€æ–‡ä»¶ç³»ç»Ÿæä¾›ç¨‹åºçš„å‰¯æœ¬ï¼Œæœ€ç»ˆç»“æœæ˜¯å‡ºç°ä¸¤ä¸ªåŒ…å«jdk.internal.jrtfsåŒ…ï¼ˆä»¥åŠè®¸å¤šå…¶ä»–åŒ…ï¼‰çš„å†²çªæ¨¡å—ã€‚è§£å†³å†²çªçš„æ–¹æ³•æ˜¯æ›´åŠ è¯¦ç»†åœ°æè¿°æ·»åŠ æ¨¡å—çš„è·¯å¾„ä¿¡æ¯ã€‚ è§£å†³æ–¹æ³• 1234#!/usr/bin/shexport PATH_TO_FX=/usr/lib/jvm/java-20-openjdk/libjava --module-path $PATH_TO_FX/javafx.base.jar:$PATH_TO_FX/javafx.controls.jar:$PATH_TO_FX/javafx.fxml.jar:$PATH_TO_FX/javafx.graphics.jar:$PATH_TO_FX/javafx.media.jar:$PATH_TO_FX/javafx.swing.jar:$PATH_TO_FX/javafx.web.jar:$PATH_TO_FX/javafx-swt.jar --add-modules ALL-MODULE-PATH -jar HMCL-3.5.5.jar","categories":[],"tags":[{"name":"hmcl","slug":"hmcl","permalink":"http://happylzyy.github.io/tags/hmcl/"},{"name":"javafx","slug":"javafx","permalink":"http://happylzyy.github.io/tags/javafx/"},{"name":"archlinux","slug":"archlinux","permalink":"http://happylzyy.github.io/tags/archlinux/"}]},{"title":"herokuåå‘ä»£ç†gitalkè§£å†³403é—®é¢˜","slug":"use-herokuapp-proxy-gitalk","date":"2022-07-03T13:01:09.000Z","updated":"2022-07-03T14:26:19.000Z","comments":true,"path":"2022/07/03/use-herokuapp-proxy-gitalk/","link":"","permalink":"http://happylzyy.github.io/2022/07/03/use-herokuapp-proxy-gitalk/","excerpt":"","text":"Gitalk 403 é—®é¢˜ Gitalkè¯„è®ºç³»ç»Ÿåœ¨ç™»å½•githubæ—¶æ˜¾ç¤ºerror: request failed with status code 403ã€‚è¿™æ˜¯å› ä¸º gitalk åœ¨è®¿é—® github æ—¶ä¸ºäº†è§£å†³è·¨åŸŸé—®é¢˜è€Œä½¿ç”¨äº†ä¸€ä¸ªåå‘ä»£ç†ï¼Œè¿™ä¸ªé»˜è®¤çš„åå‘ä»£ç†è¿‘æœŸé™åˆ¶äº†è®¿é—®ï¼Œæ‰€ä»¥æ— æ³•ä½¿ç”¨äº†ã€‚ åœ¨ç½‘ä¸Šæ‰¾äº†å¥½å‡ ä¸ªåå‘ä»£ç†åœ°å€ï¼Œä½†æ˜¯éƒ½ä¸å¥½ç”¨ï¼Œå› æ­¤å†³å®šè‡ªå·±å»ºä¸€ä¸ªåå‘ä»£ç†æœåŠ¡å™¨ã€‚æ•™ç¨‹åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯æœåŠ¡å™¨ç«¯çš„é…ç½®ï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯hexoç½‘ç«™çš„é…ç½®ã€‚ æœåŠ¡å™¨ç«¯ è¿™é‡Œç”¨åˆ°äº†å¼€æºé¡¹ç›®CORS Anywhereï¼Œè¿™ä¸ªé¡¹ç›®å¯ä»¥ç›´æ¥åœ¨herokuä¸Šè¿è¡Œã€‚ æ³¨å†Œherokuå¸å· é¦–å…ˆéœ€è¦åˆ°herokuå®˜ç½‘æ³¨å†Œå¸å·ï¼Œæ³¨å†Œå’ŒéªŒè¯çš„è¿‡ç¨‹å¯èƒ½éœ€è¦ç”¨åˆ°ä¸å¯æè¿°çš„å·¥å…·ã€‚ ä¸‹è½½å®‰è£…Hero CLI Hero CLIéœ€è¦ç”¨åˆ°gitï¼Œå¦‚æœæ²¡æœ‰è£…gitï¼Œè¯·çœ‹è¿™é‡Œ Git installation First-time Git setup åœ¨Linuxä¸Šå®‰è£…heroku-cliæ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦è¿è¡Œ 1curl https://cli-assets.heroku.com/install.sh | sh å¯¹äºarchç³»Linuxï¼Œè¿˜å¯ä»¥ç”¨AURå®‰è£… 1yay -S hero-cli ä¸‹è½½å®‰è£…CORS Anywhere è¿è¡Œgit clone 1git clone https://github.com/Rob--W/cors-anywhere.git è¿›å…¥cors-anywhereç›®å½•ï¼Œå®‰è£…ä¾èµ–åŒ… 12cd cors-anywherenpm i éƒ¨ç½²CORS Anywhere ç™»å½•heroku-cli 1heroku login -i åœ¨CORS Anywhereç›®å½•ä¸‹åˆ›å»ºæ–°çš„app 1hero create [appåç§°] #appåç§°ç•™ç©ºä¼šä½¿ç”¨éšæœºåç§° å°†CORS Anywhereæ¨é€åˆ°herokuä¸Š 1git push heroku master è¿™æ—¶å€™å®‰è£…éƒ¨ç½²å®Œæˆï¼Œå¯ä»¥çœ‹åˆ°éƒ¨ç½²å®Œæˆåçš„heroku appåœ°å€ï¼Œå¤åˆ¶ä¸‹æ¥ä¸€ä¼šå„¿è¦ç”¨åˆ°ã€‚ Hexoé…ç½® ä¸»é¢˜æ–‡ä»¶ä¿®æ”¹ ä¸åŒçš„ä¸»é¢˜å¯èƒ½æœ‰ä¸åŒçš„ä¿®æ”¹æ–¹å¼ï¼Œè¿™é‡Œä¿®æ”¹çš„æ˜¯pureä¸»é¢˜ã€‚ä¸»è¦åšäº†ä»¥ä¸‹æ›´æ”¹ï¼š å°†gitalkä¿®æ”¹ä¸ºæœ€æ–°ç‰ˆæœ¬ ä¿®æ”¹var gitalkå¢åŠ proxyå€¼ æ‰“å¼€/layout/_common/head.ejsæ–‡ä»¶ï¼Œæ‰¾åˆ° 1&lt;link rel=&quot;stylesheet&quot; href=&quot;//cdn.jsdelivr.net/npm/gitalk@1.4.0/dist/gitalk.min.css&quot;&gt; ä¿®æ”¹ä¸º 1&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css&quot;&gt; è¿™æ ·Pureä¸»é¢˜å¯ä»¥ç”¨åˆ°æœ€æ–°çš„gitalkç‰ˆæœ¬ã€‚ æ‰“å¼€/layout/_script/_comment/gitalk.ejsï¼Œä¿®æ”¹ä¸¤å¤„ 123456789101112131415161718@@ -1,6 +1,6 @@ &lt;% if (typeof(script) !== &#x27;undefined&#x27; &amp;&amp; script) &#123; %&gt; &lt;!-- &lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/gitalk/dist/gitalk.css&quot;&gt; --&gt;- &lt;script src=&quot;//cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.min.js&quot;&gt;&lt;/script&gt;+ &lt;script src=&quot;//cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;//cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot;&gt; var gitalk = new Gitalk(&#123;@@ -12,7 +12,8 @@ id: md5(location.pathname), distractionFreeMode: true, language: &#x27;&lt;%= theme.comment.gitalk.language %&gt;&#x27;,- enableHotKey: &#x27;&lt;%= theme.comment.gitalk.enableHotKey %&gt;&#x27;+ enableHotKey: &#x27;&lt;%= theme.comment.gitalk.enableHotKey %&gt;&#x27;,+ proxy: &#x27;&lt;%= theme.comment.gitalk.proxy %&gt;&#x27; &#125;) gitalk.render(&#x27;comments&#x27;) &lt;/script&gt; gitalk@1.6.2æ”¹æˆgitalk@1.7.2ä»¥ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬gitalkï¼Œvar gitalkå˜é‡å¢åŠ ä¸€æ¡å†…å®¹proxy: '&lt;%= theme.comment.gitalk.proxy %&gt;'ï¼Œæ³¨æ„ä¸Šä¸€æ¡å†…å®¹åé¢åŠ , ä¿®æ”¹ä¸»é¢˜é…ç½® åœ¨pureä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­å¢åŠ proxyåœ°å€ï¼Œä¸åŒçš„ä¸»é¢˜gitalkä½ç½®å¯èƒ½ä¸åŒã€‚ æ‰“å¼€_config.pure.yamlæ–‡ä»¶ï¼Œåœ¨gitalké‡Œå¢åŠ proxyåœ°å€ 1234567gitalk: # gitalk. https://gitalk.github.io/ owner: #å¿…é¡». GitHub repository æ‰€æœ‰è€…ï¼Œå¯ä»¥æ˜¯ä¸ªäººæˆ–è€…ç»„ç»‡ã€‚ admin: #å¿…é¡». GitHub repository çš„æ‰€æœ‰è€…å’Œåˆä½œè€… (å¯¹è¿™ä¸ª repository æœ‰å†™æƒé™çš„ç”¨æˆ·)ã€‚ repo: #å¿…é¡». GitHub repository. ClientID: #å¿…é¡». GitHub Application Client ID. ClientSecret: #å¿…é¡». GitHub Application Client Secret. proxy: https://[heroku app åœ°å€]/https://github.com/login/oauth/access_token è¿™æ ·Hexoå°±ä¿®æ”¹å®Œäº†ï¼Œé‡æ–°ç”Ÿæˆå’Œéƒ¨ç½²Hexoç«™ç‚¹åˆ°Githubï¼Œå°è¯•ç™»å½•Gitalkã€‚ æ€»ç»“ Gitalk 403 é—®é¢˜æ˜¯é»˜è®¤çš„åå‘ä»£ç†åœ°å€å¤±æ•ˆé€ æˆçš„ï¼Œé€šè¿‡ä½¿ç”¨herokuè‡ªå»ºåå‘ä»£ç†æœåŠ¡è§£å†³Gitalk 403é—®é¢˜ã€‚","categories":[],"tags":[{"name":"heroku","slug":"heroku","permalink":"http://happylzyy.github.io/tags/heroku/"},{"name":"gitalk","slug":"gitalk","permalink":"http://happylzyy.github.io/tags/gitalk/"},{"name":"proxy","slug":"proxy","permalink":"http://happylzyy.github.io/tags/proxy/"}]},{"title":"R720-15IKBN MSR 0xE2 CFG Lock è§£é”","slug":"how-to-unlock-cfg-lock","date":"2022-07-03T06:15:11.000Z","updated":"2022-07-03T06:24:49.000Z","comments":true,"path":"2022/07/03/how-to-unlock-cfg-lock/","link":"","permalink":"http://happylzyy.github.io/2022/07/03/how-to-unlock-cfg-lock/","excerpt":"","text":"ä»€ä¹ˆæ˜¯ MSR CFG Lock è§£é”ï¼Ÿ MSRï¼ˆModel Specific Registerï¼‰æ˜¯x86æ¶æ„ä¸­çš„æ¦‚å¿µï¼ŒæŒ‡çš„æ˜¯åœ¨x86æ¶æ„å¤„ç†å™¨ä¸­ï¼Œä¸€ç³»åˆ—ç”¨äºæ§åˆ¶CPUè¿è¡Œã€åŠŸèƒ½å¼€å…³ã€è°ƒè¯•ã€è·Ÿè¸ªç¨‹åºæ‰§è¡Œã€ç›‘æµ‹CPUæ€§èƒ½ç­‰æ–¹é¢çš„å¯„å­˜å™¨ã€‚ å¤§å¤šæ•°UEFIä¸»æ¿å‚å®¶ï¼Œé”å®šäº†MSRå¯„å­˜å™¨çš„ç¬¬15ä½ä¸ºåªè¯»ï¼Œä¹Ÿå°±æ˜¯MSR 0xE2 Lockingï¼ˆBIOS ä¸­å«CFG Lockï¼‰ã€‚è‹¹æœmacOSç³»ç»Ÿçš„ç”µæºç®¡ç†ã€CPUçš„P-stateã€C-stateæ”¾åœ¨MSRå¯„å­˜å™¨é‡Œï¼ŒMSR 0xE2è¢«é”å®šä¸ºåªè¯»åï¼ŒmacOSç³»ç»Ÿçš„ç”µæºç®¡ç†é©±åŠ¨æ‰©å±•AppleIntelCPUPowerManagementä¸€æ—¦å°è¯•å»å†™å…¥æ•°æ®ï¼Œç³»ç»Ÿå°±ä¼šé©¬ä¸Šå´©æºƒã€‚æœ‰äº›ä¸»æ¿ä¸Šæœ‰é€‰é¡¹â€œCFG Lockâ€ï¼Œå…¶è¯´æ˜å†…å®¹ä¸ºâ€å…³é—­æˆ–å¼€å¯MSR 0xE2â€³ï¼Œå¯ä»¥æ‰‹åŠ¨å¼€å…³ï¼Œæœ‰äº›ä¸»æ¿åˆ™å±è”½äº†è¿™ä¸ªé€‰é¡¹ã€‚å½“ä½¿ç”¨é»‘è‹¹æœæ—¶ï¼Œå¿…é¡»è§£é”MSR 0xE2ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨è‹¹æœçš„åŸç”Ÿç”µæºç®¡ç†ã€‚ è”æƒ³ç­‰ä¸€äº› OEM è®¾ç½®äº†BIOSå†…éƒ¨çš„å˜é‡ï¼Œä¹Ÿå°±æ˜¯è¯´å›ºåŒ–åˆ°äº†BIOSçš„å›ºä»¶ä»£ç é‡Œï¼Œå¦‚æœä¸å¯¹ BIOS è¿›è¡Œç‰©ç†ä¿®æ”¹å°±æ— æ³•è§£é”å®ƒï¼Œå¯¹äºè¿™ç§æƒ…å†µï¼Œéœ€è¦ä¿®æ”¹BIOSæ‰èƒ½è§£é”CFG Lockã€‚Lenovo R720-15IKBNå°±å±äºä¸Šè¿°æƒ…å†µï¼Œå› æ­¤è¦å¯¹BIOSè¿›è¡Œä¿®æ”¹ã€‚ åˆ·æœºæœ‰é£é™©ï¼Œææœºé¡»è°¨æ…ï¼å¤±è´¥ä¼šé€ æˆç”µè„‘å˜ç –ï¼Œæ²¡æœ‰æ•‘ç –æŠ€æœ¯è¯·ä¸è¦å°è¯•ï¼æœ¬æ–‡ä»…ä¾›å‚è€ƒï¼Œå¯¹äºè¯»è€…è‡ªå·±é€ æˆçš„æŸåä¸æ‰¿æ‹…ä»»ä½•è´£ä»»ï¼ ç¯å¢ƒå‡†å¤‡ æ’äº†ç¨³å®šäº¤æµç”µæºçš„Lenovo R720-15IKBN ç¬”è®°æœ¬ç”µè„‘ Windows 10ï¼Œå› ä¸ºå¤§éƒ¨åˆ†æ“ä½œéƒ½åœ¨Winç¯å¢ƒä¸‹è¿›è¡Œ macOSä¸OpenCore ä¸€ä¸ªæ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿä¸ºFAT32çš„Uç›˜ å®‰é™çš„æ²¡æœ‰äººæ‰“æ‰°æ‚¨çš„ç¯å¢ƒ å·¥å…·å‡†å¤‡ Lenovo å®˜æ–¹ 4KCN27WWç‰ˆ BIOS è”æƒ³å®˜æ–¹BIOSé€šå¸¸å…·æœ‰å†™ä¿æŠ¤æªæ–½ï¼Œè€Œ27ç‰ˆBIOSæ²¡æœ‰å†™ä¿æŠ¤å› æ­¤å¯ä»¥è¿›è¡Œä¿®æ”¹ï¼ŒBIOSé™çº§ç¨‹åºå¯åœ¨å®˜ç½‘è¾“å…¥ä¸»æœºç¼–å·åå¯»æ‰¾ä¸‹è½½åˆ°ã€‚ ä¸‹è½½åœ°å€ï¼šhttps://newsupport.lenovo.com.cn/ Intel CSME System Tools ç”¨äºDump BIOS å›ºä»¶ï¼Œæ ¹æ®ä¸åŒçš„å¹³å°é€‰æ‹©ä¸åŒçš„ç‰ˆæœ¬ï¼Œè¿™é‡Œé€‰æ‹©v11 r37ç‰ˆã€‚ ä¸‹è½½åœ°å€ï¼šhttps://comsystem-tlt.ru/obzori/me-txe-region UEFITool æŸ¥æ‰¾BIOSä¸­ç›¸å…³å˜é‡ï¼ˆå­—ç¬¦ä¸²ï¼‰çš„å·¥å…·ã€‚ ä¸‹è½½åœ°å€ï¼šhttps://github.com/LongSoft/UEFITool/releases IRFExtractor å°†UEFIToolå¾—åˆ°çš„PE32 imageè½¬æ¢æˆæ–‡æœ¬çš„å·¥å…·ã€‚ ä¸‹è½½åœ°å€ï¼šhttps://github.com/LongSoft/Universal-IFR-Extractor/releases easyUEFIæˆ–Bootice ç”¨äºä¿®æ”¹UEFIå¯åŠ¨é¡¹ã€‚ BIOS é™çº§ è¿›å…¥UEFI BIOS è®¾ç½®ï¼Œå°†BIOS Back Flashè®¾ä¸ºEnabledï¼Œå…è®¸BIOSå›æ»šåˆ·æ–°ï¼› é‡å¯è¿›å…¥Windowsï¼Œè¿è¡Œä»å®˜ç½‘ä¸‹è½½çš„27ç‰ˆBIOSé™çº§ç¨‹åºï¼Œå®‰è£…å®Œæˆåç³»ç»Ÿè‡ªåŠ¨é‡å¯ï¼Œå¼€å§‹é™çº§è¿‡ç¨‹ã€‚ æ³¨æ„åœ¨é™çº§è¿‡ç¨‹ä¸­ä¸€å®šä¸è¦æ–­å¼€ç”µæºï¼ BIOSåˆ·å†™æˆåŠŸåï¼Œç”µè„‘ä¼šè‡ªåŠ¨é‡å¯æ•°æ¬¡ï¼Œå±äºæ­£å¸¸ç°è±¡ï¼Œä¸è¦æ–­ç”µæºã€‚ åˆ·å†™åå¯èƒ½æ— æ³•è¿›å…¥Winç³»ç»Ÿï¼Œé‡æ–°è¿›å…¥UEFI BIOSè®¾ç½®ï¼Œå…³é—­å®‰å…¨å¯åŠ¨ï¼Œå°†SATAæ§åˆ¶å™¨å·¥ä½œæ¨¡å¼è®¾ç½®ä¸ºAHCIï¼Œä¿å­˜è®¾ç½®åé‡å¯å°±èƒ½è¿›å…¥ç³»ç»Ÿã€‚ æå–ä¸»æ¿BIOS è¿›å…¥ç³»ç»Ÿåï¼Œæ‰“å¼€Intel CSME System Tools v11 r37/Flash Programming Tool/WIN64ï¼Œæ–°å»ºæ–‡æœ¬æ–‡æ¡£ï¼Œè¾“å…¥ä»¥ä¸‹ä»£ç  12cd /d %~dp0fptw64.exe -bios -d backup.fd ä¿å­˜åä¿®æ”¹æ–‡ä»¶æ‰©å±•åä¸º.cmdï¼Œå³é”®ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œï¼Œæå–ä¸»æ¿BIOSï¼Œæå–åçš„æ–‡ä»¶å­˜å‚¨åœ¨åŒç›®å½•ä¸‹ï¼Œåå­—ä¸ºbackup.fdã€‚ æå–BIOSä¿¡æ¯ æ‰“å¼€UEFIToolï¼Œèœå•æ é€‰æ‹©File &gt; Open image file...ï¼Œé€‰æ‹©ä¸Šä¸€æ­¥æå–å‡ºçš„backup.fdã€‚ èœå•æ é€‰æ‹©Action &gt; Search...ï¼Œåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹©Textï¼Œè¾“å…¥CFG Lockï¼Œæœç´¢çš„ç»“æœåœ¨ä¸‹æ–¹æ˜¾ç¤ºï¼ŒåŒå‡»Unicode text \"CFG Lock\" in DriverSampleDxe/PE32 image section at header-offset 496F4hå®šä½åˆ°CFG Lockæ‰€åœ¨ä½ç½®ã€‚ åœ¨å®šä½åˆ°çš„ä½ç½®å³å‡»PE32 image sectionï¼Œé€‰æ‹©Extarct as is...ï¼Œå°†PE32 imageæ–‡ä»¶ä¿å­˜ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦æŠŠPE32 imageè½¬æ¢æˆæˆ‘ä»¬èƒ½è¯»æ‡‚çš„ä¿¡æ¯ã€‚ æ‰“å¼€IFRExtractorï¼Œç›´æ¥ç‚¹å‡»å³ä¾§åŠ è½½æŒ‰é’®ï¼Œæ‰“å¼€ä¸Šä¸€æ­¥çš„PE32æ–‡ä»¶ï¼Œå†ç‚¹å‡»Extractï¼Œå°±ä¼šç”Ÿæˆtxtæ–‡æœ¬ï¼Œå¹¶ä¿å­˜åˆ°ç›¸åº”çš„æ–‡ä»¶å¤¹ã€‚ å¯»æ‰¾éœ€è¦çš„åç§»é‡ æ‰“å¼€è½¬æ¢çš„txtæ–‡ä»¶ï¼Œæœç´¢å­—ç¬¦ä¸²CFG Lockï¼Œå®šä½åˆ°CFG Lockä½ç½®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œä¸åŒæœºå™¨å¯èƒ½ä¸åŒï¼š 123450x9B0B4 Form: View/Configure CPU Lock Options, FormId: 0x1012 &#123;01 86 12 10 C3 00&#125;0x9B0BA One Of: CFG Lock, VarStoreInfo (VarOffset/VarName): 0x3C, VarStore: 0x3, QuestionId: 0x145, Size: 1, Min: 0x0, Max 0x1, Step: 0x0 &#123;05 91 66 02 67 02 45 01 03 00 3C 00 10 10 00 01 00&#125;0x9B0CB One Of Option: Disabled, Value (8 bit): 0x0 &#123;09 07 04 00 00 00 00&#125;0x9B0D2 One Of Option: Enabled, Value (8 bit): 0x1 (default) &#123;09 07 03 00 30 00 01&#125;0x9B0D9 End One Of &#123;29 02&#125; å…¶ä¸­ CFG Lock, VarStoreInfo (VarOffset/VarName): 0x3C, VarStore: 0x3å°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„ã€‚ VarStoreInfoçš„å€¼æ˜¯CFG Lockè¿™ä¸ªé€‰é¡¹çš„åœ°å€ï¼Œä¹Ÿå¯ä»¥è¯´å…¶åœ¨BIOSä¸­çš„åç§»é‡ã€‚åé¢çš„VarStoreæ˜¯BIOSé»˜è®¤å€¼ï¼Œæ­¤å¤„ä¸º0x3ã€‚è€Œæˆ‘ä»¬æƒ³è¦è§£é”å®ƒå°±éœ€è¦æŠŠå®ƒä¿®æ”¹æˆ0x0ï¼Œå³ä¸‹é¢å¯¹åº”çš„Disabled Optionï¼Œå°±æ˜¯éœ€è¦æŠŠ0x3Cè¿™ä¸ªåç§»åœ°å€ä¸Šçš„æ•°å€¼ä¿®æ”¹ä¸º0x0ã€‚ è¯·æ³¨æ„ï¼Œå¯å˜åç§»é‡ä¸ä»…å¯¹äºæ¯ä¸ªä¸»æ¿æ˜¯å”¯ä¸€çš„ï¼Œç”šè‡³å¯¹äºæ¯ä¸ªå›ºä»¶ç‰ˆæœ¬ä¹Ÿæ˜¯å”¯ä¸€çš„ã€‚æ‰€ä»¥è¯»è€…åº”è¯¥è‡ªå·±å¯»æ‰¾åç§»é‡ï¼Œåˆ‡å‹¿åœ¨ä¸æ£€æŸ¥çš„æƒ…å†µä¸‹å°è¯•ä½¿ç”¨æœ¬æ–‡ä¸­çš„åç§»é‡ã€‚ ä¿®æ”¹BIOSåç§»é‡ è¿™é‡Œä½¿ç”¨çš„å·¥å…·æ˜¯RU.efiã€‚ æ‰“å¼€Uç›˜ï¼Œæ–°å»ºEFI/BOOT/ç›®å½•ï¼Œå°†RU.efié‡å‘½åä¸ºBOOTX64.efiæ”¾åˆ°è¯¥ç›®å½•ä¸‹ã€‚ é‡å¯ç³»ç»Ÿï¼Œé€‰æ‹©ä»Uç›˜å¯åŠ¨ï¼ŒæŒ‰ä»»æ„é”®å³å¯è¿›å…¥RUå·¥å…·ã€‚ è¿›å…¥åæŒ‰ alt+= åˆ‡æ¢è¿› \"ACPI Variable\"ï¼› ç”¨PageUp/PageDown/ä¸Šä¸‹æ–¹å‘é”®æ‰¾åˆ°\"CPUSetup\"ï¼› å›è½¦è¿›å…¥ï¼Œç„¶åç”¨ä¸Šä¸‹å·¦å³æ–¹å‘é”®æ‰¾åˆ°å¯¹åº”çš„åœ°å€ï¼ˆæœ¬æ–‡ä¸­æ˜¯0x3Cï¼Œé‚£ä¹ˆå°±æ˜¯çºµåæ ‡0030ï¼Œæ¨ªåæ ‡0Cçš„ä½ç½®ï¼‰ï¼› å›è½¦ï¼Œè¾“å…¥0å°±å¯ä»¥çœ‹åˆ°å®ƒå˜æˆäº†0ï¼Œå†æŒ‰å›è½¦ç¡®è®¤ï¼› æŒ‰Ctrl +Wæ¥ä¿å­˜ï¼Œä¿å­˜çš„æ—¶å€™å±å¹•ä¸Šä¼šç›´æ¥æ˜¾ç¤ºUpdated OKï¼Œè¿™è¯´æ˜å†™å…¥æˆåŠŸï¼› æŒ‰Alt+Q æ¥é€€å‡ºï¼Œç„¶åå³å¯å›åˆ°å¼•å¯¼è¿›å…¥ç³»ç»Ÿäº†ï¼Œæ­¤æ—¶CFGå·²ç»è§£é”ã€‚ æ£€æŸ¥è§£é”æƒ…å†µ é€šè¿‡ ControlMsrE2 æ£€æŸ¥ï¼Œå°†OpenCoreè‡ªå¸¦çš„Tools/ControlMsrE2.efiåŠ å…¥åˆ°Config.plisté…ç½®æ–‡ä»¶ä¸­ ã€‚æ¥ä¸‹æ¥ï¼Œå¯åŠ¨ OpenCore å¹¶é€‰æ‹©ControlMsrE2.efiæ¡ç›®ã€‚è¿™åº”è¯¥ä¼šæ˜¾ç¤ºä»¥ä¸‹å†…å®¹ï¼š 1This firmware has UNLOCKED MSR 0xE2 register! è¯´æ˜MSR 0xE2è§£é”æˆåŠŸã€‚ ä¿®æ”¹OpenCoreé…ç½®æ–‡ä»¶ åœ¨Kernel Optionä¸­å–æ¶ˆAppleCpuPmCfgLockå’ŒAppleXcpmCfgLockçš„å‹¾é€‰ã€‚ æ­å–œæ‚¨å®ŒæˆMSR CFG Lockè§£é”å…¨è¿‡ç¨‹ï¼ç°åœ¨æ‚¨å°†æ‹¥æœ‰æ­£ç¡®çš„ CPU ç”µæºç®¡ç†ã€‚ å‚è€ƒèµ„æ–™ è§£é”CFG Lock | å¼ ç™»å‹çš„åšå®¢ (zdynb.cn) ä¿®å¤CFGé”-è¿œæ™¯è®ºå›-å¾®è½¯æå®¢ç¤¾åŒº (pcbeta.com) ä»Cloveråˆ°OC ï¼ˆé‡éš¾ç‚¹ï¼šInsyde BIOS è§£é”CFG Lockï¼‰ - çŸ¥ä¹ (zhihu.com)","categories":[],"tags":[{"name":"bios","slug":"bios","permalink":"http://happylzyy.github.io/tags/bios/"},{"name":"hackintosh","slug":"hackintosh","permalink":"http://happylzyy.github.io/tags/hackintosh/"}]},{"title":"Pureä¸»é¢˜ä½¿ç”¨Katexæ¸²æŸ“Latexå…¬å¼","slug":"how-to-render-latex-equation-code-with-katex","date":"2022-07-03T05:57:00.000Z","updated":"2022-07-03T06:03:48.000Z","comments":true,"path":"2022/07/03/how-to-render-latex-equation-code-with-katex/","link":"","permalink":"http://happylzyy.github.io/2022/07/03/how-to-render-latex-equation-code-with-katex/","excerpt":"","text":"Pureä¸»é¢˜çš„æ•°å­¦å…¬å¼åŠŸèƒ½å¹¶ä¸å®Œå–„ï¼Œä¸ºäº†æ”¯æŒKatexï¼Œå¯¹Pureä¸»é¢˜å’ŒHexoé…ç½®åšäº†å¤§é‡ä¿®æ”¹ã€‚ Hexoé…ç½®ä¿®æ”¹ Hexoè‡ªå¸¦çš„æ¸²æŸ“æ’ä»¶ä¸æ”¯æŒæ•°å­¦å…¬å¼ï¼Œå› æ­¤å…ˆå¸è½½è‡ªå¸¦çš„æ¸²æŸ“æ’ä»¶ npm uninstall hexo-renderer-marked --save åˆ é™¤å…¶ä»–ä»»ä½•ä¸æ•°å­¦å…¬å¼æœ‰å…³çš„æ’ä»¶ï¼Œå¦‚hexo-mathã€markdown-it-katexç­‰ç­‰ï¼› åˆ é™¤_config.yamlé…ç½®æ–‡ä»¶é‡Œä¸æ•°å­¦å…¬å¼æœ‰å…³çš„éƒ¨åˆ†ï¼› å®‰è£…æ–°çš„æ¸²æŸ“æ’ä»¶ npm install hexo-renderer-pandoc --save å®‰è£…ä¾èµ–çš„è½¯ä»¶åŒ…pandocï¼Œæ‰“å¼€ç»ˆç«¯è¿è¡Œyay -Syu pandocï¼› Pureä¸»é¢˜ä¿®æ”¹ æ‰“å¼€head.ejsæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä½äºthemes/pure/layout/_common/ï¼Œæ‰¾åˆ° 123&lt;% if (page.mathjax) &#123; %&gt;&lt;link href=&quot;//cdn.jsdelivr.net/npm/katex@0.9.0/dist/katex.min.css&quot; rel=&quot;stylesheet&quot;&gt;&lt;% &#125; %&gt; ä¿®æ”¹ä¸º 12345678910&lt;% if (page.katex) &#123; %&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css&quot; integrity=&quot;sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC&quot; crossorigin=&quot;anonymous&quot;&gt; &lt;!-- The loading of KaTeX is deferred to speed up page rendering --&gt; &lt;script defer src=&quot;https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js&quot; integrity=&quot;sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt; &lt;!-- To automatically render math in text elements, include the auto-render extension: --&gt; &lt;script defer src=&quot;https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js&quot; integrity=&quot;sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR&quot; crossorigin=&quot;anonymous&quot; onload=&quot;renderMathInElement(document.body);&quot;&gt;&lt;/script&gt;&lt;% &#125; %&gt; åˆ é™¤themes/pure/layout/_script/mathjax.ejsæ–‡ä»¶ã€‚ å¯ç”¨æ•°å­¦å…¬å¼ éœ€è¦å†™å…¬å¼çš„æ–‡ç« åœ¨å¼€å¤´åŠ å…¥ 1katex: true æ¥æµ‹è¯•ä¸€ä¸‹å…¬å¼æ¸²æŸ“å§ï¼ 12345678910111213$$\\begin&#123;cases&#125;\\nabla\\times\\vec&#123;E&#125;=-\\frac&#123;\\partial\\vec&#123;B&#125;&#125;&#123;\\partial t&#125;\\\\\\nabla\\times\\vec&#123;H&#125;=\\vec&#123;J_v&#125;+\\frac&#123;\\partial\\vec&#123;D&#125;&#125;&#123;\\partial t&#125;\\\\\\nabla\\cdot\\vec&#123;D&#125;=\\rho_v\\\\\\nabla\\cdot\\vec&#123;B&#125;=0\\end&#123;cases&#125;\\quad\\begin&#123;cases&#125;\\vec&#123;D&#125;=\\epsilon\\vec&#123;E&#125;\\\\\\vec&#123;B&#125;=\\mu\\vec&#123;H&#125;\\\\\\vec&#123;J_v&#125;=\\sigma\\vec&#123;E&#125;\\end&#123;cases&#125;$$ æ¸²æŸ“ä¸º \\[ \\begin{cases} \\nabla\\times\\vec{E}=-\\frac{\\partial\\vec{B}}{\\partial t}\\\\ \\nabla\\times\\vec{H}=\\vec{J_v}+\\frac{\\partial\\vec{D}}{\\partial t}\\\\ \\nabla\\cdot\\vec{D}=\\rho_v\\\\ \\nabla\\cdot\\vec{B}=0 \\end{cases}\\quad \\begin{cases} \\vec{D}=\\epsilon\\vec{E}\\\\ \\vec{B}=\\mu\\vec{H}\\\\ \\vec{J_v}=\\sigma\\vec{E} \\end{cases} \\]","categories":[],"tags":[{"name":"katex","slug":"katex","permalink":"http://happylzyy.github.io/tags/katex/"}]},{"title":"ä½¿ç”¨Hexoå»ºç«‹ä¸ªäººBlogç«™","slug":"how-to-build-blog-with-hexo","date":"2021-08-05T17:41:30.000Z","updated":"2024-08-09T14:45:29.679Z","comments":true,"path":"2021/08/06/how-to-build-blog-with-hexo/","link":"","permalink":"http://happylzyy.github.io/2021/08/06/how-to-build-blog-with-hexo/","excerpt":"","text":"æœ¬æ–‡ç« è®°å½•äº†æœ¬åšå®¢çš„å»ºç«‹è¿‡ç¨‹ï¼Œä»¥ä¸‹æ‰€æœ‰æ“ä½œæ˜¯åœ¨Manjaro Linuxä¸Šè¿›è¡Œçš„ï¼Œå…¶ä»–æœªå°½äº‹å®œè¯·è§å®˜æ–¹æ–‡æ¡£ã€‚ Hexoç®€ä»‹ Hexoæ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ï¼› å¯ä»¥ä½¿ç”¨ Markdown æ¥æ’ç‰ˆå’Œå†™æ–‡ç« ï¼› ç”Ÿæˆçš„ç½‘é¡µæ˜¯é™æ€é¡µé¢çš„ï¼Œç‰¹åˆ«é€‚åˆç”¨æ¥ç™½å«– GitHub PagesğŸ˜ˆã€‚ å®‰è£…ç¯å¢ƒ Hexoè¿è¡Œæ‰€éœ€çš„è½¯ä»¶å’Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š Node.js 1yay -Sy nodejs npm ç”±äºæŸäº›ä¸å¯æè¿°çš„åŸå› ï¼Œnpméœ€è¦æ¢æˆå›½å†…çš„æ·˜å®æºï¼š 1npm config set registry https://registry.npm.taobao.org Git 1yay -Sy git Hexoç«™ç‚¹åˆå§‹åŒ– å»ºç«‹ä¸€ä¸ªç©ºæ–‡ä»¶å¤¹å¹¶è¿›å…¥è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œè¿™å°†æˆä¸ºåšå®¢ç«™çš„ä¸»ç›®å½• 1mkdir hexo_blog &amp;&amp; cd hexo_blog åœ¨è¯¥ç›®å½•å†…å®‰è£…Hexo 1npm install hexo è¿›è¡Œhexoåˆå§‹åŒ– 1npx hexo init æ­¤æ—¶ï¼Œä¸€ä¸ªHexoé©±åŠ¨çš„åšå®¢ç«™å°±å»ºå¥½äº†ã€‚è¦æŸ¥çœ‹åˆšåˆšå»ºå¥½çš„åšå®¢ï¼Œå¯ä»¥æ‰§è¡Œnpx hexo clean &amp;&amp; npx hexo g &amp;&amp; npx hexo sï¼ŒæŒ‰ä½Ctrlå»ºç‚¹å‡»ç”Ÿæˆçš„ç½‘å€å³å¯æ‰“å¼€ã€‚ Hexoç®¡ç† è¿™é‡Œåˆ—ä¸¾å‡ ä¸ªå¸¸ç”¨çš„Hexoå‘½ä»¤ æ¸…ç†ç”Ÿæˆçš„æ–‡ä»¶ 1npx hexo clean ç”Ÿæˆæ–‡ä»¶ 1npx hexo generate è¿›è¡Œé¢„è§ˆ 1npx hexo server æ–°å»ºæ–‡ç«  1npx hexo new &quot;NewPostName&quot; Hexoä¸»é¢˜ä¿®æ”¹ Hexoæœ‰å¾ˆå¤šä¸»é¢˜å¯ä¾›é€‰æ‹©ï¼Œåœ¨å®˜ç½‘çš„ä¸»é¢˜ç«™æŒ‘é€‰ï¼Œè¿™é‡Œé€‰æ‹©pureä¸»é¢˜ã€‚ åœ¨åšå®¢ç«™ä¸»ç›®å½•ä¸‹å…‹éš†ä¸»é¢˜ 1git clone https://github.com/cofess/hexo-theme-pure.git themes/pure å®‰è£…pureä¸»é¢˜çš„ä¾èµ–åŒ… 12345npm install hexo-wordcount --savenpm install hexo-generator-json-content --savenpm install hexo-generator-feed --savenpm install hexo-generator-sitemap --savenpm install hexo-generator-baidu-sitemap --save å¤åˆ¶ä¸€ä»½ä¸»é¢˜é…ç½®æ ·ä¾‹åˆ°åšå®¢ä¸»ç›®å½• 1cp themes/pure/_config.yml _config.pure.yml ä¿®æ”¹åšå®¢é…ç½®_config.ymlï¼Œå°†themes: landscapeä¿®æ”¹ä¸ºthemes: pureã€‚ æ ¹æ®è¯´æ˜æ–‡æ¡£å¯¹ä¸»é¢˜é…ç½®è¿›è¡Œç›¸å…³ä¿®æ”¹ã€‚ Hexoéƒ¨ç½² ç™»å½•è‡ªå·±çš„GitHubï¼Œæ–°å»ºä¸€ä¸ªRepositoryï¼Œåå­—ä¸º[GitHubç”¨æˆ·å].github.ioã€‚ åœ¨Repositoryçš„Settingä¸­å‹¾é€‰GitHub PagesåŠŸèƒ½ã€‚ æ‰“å¼€åšå®¢é…ç½®æ–‡ä»¶_config.ymlä¿®æ”¹åšå®¢ç½‘ç«™çš„æè¿°éƒ¨åˆ† 123456789# Sitetitle: Someone&#x27;s Blog # åšå®¢æ ‡é¢˜subtitle: &#x27;&#x27; # æ¬¡æ ‡é¢˜description: &#x27;&#x27; #ç½‘ç«™æè¿°keywords: # å…³é”®è¯author: me # ä½œè€…language: en # åšå®¢ç½‘ç«™è¯­è¨€ï¼Œè‹±è¯­enï¼Œä¸­æ–‡zh-CNtimezone: &#x27;&#x27; # æ—¶åŒº ä¿®æ”¹ç«™ç‚¹ç½‘å€éƒ¨åˆ† 1234# URL## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;url: http://[Githubç”¨æˆ·å].github.io ä¿®æ”¹éƒ¨ç½²éƒ¨åˆ† 1234deploy: type: &#x27;git&#x27; # éƒ¨ç½²æ–¹å¼ä¸ºgit repository: git@github.com:happylzyy/happylzyy.github.io.git # Repositoryè¿œç¨‹ä»“åº“åœ°å€ branch: master # éƒ¨ç½²åˆ°è¿œç¨‹åˆ†æ”¯master é…ç½®å®Œæˆåï¼Œè¿è¡Œnpx hexo clean &amp;&amp; npx hexo gé‡æ–°ç”Ÿæˆåšå®¢ï¼Œå†è¿è¡Œnpx hexo deployå³å¯éƒ¨ç½²åˆ°GitHubä¸Šã€‚","categories":[],"tags":[{"name":"hexo","slug":"hexo","permalink":"http://happylzyy.github.io/tags/hexo/"}]}],"categories":[],"tags":[{"name":"manjaro","slug":"manjaro","permalink":"http://happylzyy.github.io/tags/manjaro/"},{"name":"linux","slug":"linux","permalink":"http://happylzyy.github.io/tags/linux/"},{"name":"secureboot","slug":"secureboot","permalink":"http://happylzyy.github.io/tags/secureboot/"},{"name":"luks","slug":"luks","permalink":"http://happylzyy.github.io/tags/luks/"},{"name":"tpm","slug":"tpm","permalink":"http://happylzyy.github.io/tags/tpm/"},{"name":"bios","slug":"bios","permalink":"http://happylzyy.github.io/tags/bios/"},{"name":"javascript","slug":"javascript","permalink":"http://happylzyy.github.io/tags/javascript/"},{"name":"hexo","slug":"hexo","permalink":"http://happylzyy.github.io/tags/hexo/"},{"name":"hmcl","slug":"hmcl","permalink":"http://happylzyy.github.io/tags/hmcl/"},{"name":"javafx","slug":"javafx","permalink":"http://happylzyy.github.io/tags/javafx/"},{"name":"archlinux","slug":"archlinux","permalink":"http://happylzyy.github.io/tags/archlinux/"},{"name":"heroku","slug":"heroku","permalink":"http://happylzyy.github.io/tags/heroku/"},{"name":"gitalk","slug":"gitalk","permalink":"http://happylzyy.github.io/tags/gitalk/"},{"name":"proxy","slug":"proxy","permalink":"http://happylzyy.github.io/tags/proxy/"},{"name":"hackintosh","slug":"hackintosh","permalink":"http://happylzyy.github.io/tags/hackintosh/"},{"name":"katex","slug":"katex","permalink":"http://happylzyy.github.io/tags/katex/"}]}